'use strict';

/**
 * Created by Alex Bogdan on 05.04.2017.
 */

/**
 * Created by Alex Bogdan on 06.04.2017.
 */

function showContent(link) {

    var cont = document.getElementById('dynamic-cont');
    var loading = document.getElementById('loading');

    cont.innerHTML = loading.innerHTML;

    var http = createRequestObject();
    if (http) {
        http.open('get', link);
        http.onreadystatechange = function () {
            if (http.readyState == 4) {
                cont.innerHTML = http.responseText;
            }
        };
        http.send(null);
    } else {
        document.location = link;
    }
}

// создание ajax объекта
function createRequestObject() {
    try {
        return new XMLHttpRequest();
    } catch (e) {
        try {
            return new ActiveXObject('Msxml2.XMLHTTP');
        } catch (e) {
            try {
                return new ActiveXObject('Microsoft.XMLHTTP');
            } catch (e) {
                return null;
            }
        }
    }
}

//diseases-list-nav__link
$(document).ready(function () {
    var links = $(".diseases-list-nav__link"),
        dest = $('#dynamic-cont');

    links.each(function (i, el) {

        $(el).on('click', function (el) {
            var url = el.currentTarget.getAttribute('data-url');
            var link = $(el.currentTarget);
            dest.css('display', 'none');
            links.removeClass('_active');
            link.addClass('_active');
            showContent(url);
            dest.fadeIn(1000);
        });
    });

    showContent('dynamic-blocks/encycl-anatomy.html');
});

/**
 * Created by Alex Bogdan on 05.04.2017.
 */

var listLinks = $(".med-sec__link"),
    listDesc = $(".med-sec__desc-cont"),
    oops = $('.med-sec__oops');

listLinks.each(function (i, el) {
    $(el).on('click', function () {
        listLinks.removeClass('_active');
        listDesc.removeClass('visible');
        oops.removeClass('visible');
        if (listDesc[i]) {
            listDesc[i].setAttribute('class', 'med-sec__desc-cont visible');
        } else {
            oops.addClass('visible');
        }
    });
});